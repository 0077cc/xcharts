/**
 * xCharts 0.1.4 Copyright (c) 2012, tenXer, Inc. All Rights Reserved.
 * Available via the MIT license.
 * see: http://github.com/tenxer/xCharts for details
 */

/**
 * almond 0.1.4 Copyright (c) 2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/*!
 Lo-Dash 0.8.0 lodash.com/license
 Underscore.js 1.4.0 underscorejs.org/LICENSE
*/

(function(){var e,t,n;(function(r){function c(e,t){var n,r,i,s,o,u,f,l,c,h,p=t&&t.split("/"),d=a.map,v=d&&d["*"]||{};if(e&&e.charAt(0)==="."&&t){p=p.slice(0,p.length-1),e=p.concat(e.split("/"));for(l=0;l<e.length;l+=1){h=e[l];if(h===".")e.splice(l,1),l-=1;else if(h===".."){if(l===1&&(e[2]===".."||e[0]===".."))break;l>0&&(e.splice(l-1,2),l-=2)}}e=e.join("/")}if((p||v)&&d){n=e.split("/");for(l=n.length;l>0;l-=1){r=n.slice(0,l).join("/");if(p)for(c=p.length;c>0;c-=1){i=d[p.slice(0,c).join("/")];if(i){i=i[r];if(i){s=i,o=l;break}}}if(s)break;!u&&v&&v[r]&&(u=v[r],f=l)}!s&&u&&(s=u,o=f),s&&(n.splice(0,o,s),e=n.join("/"))}return e}function h(e,t){return function(){return s.apply(r,l.call(arguments,0).concat([e,t]))}}function p(e){return function(t){return c(t,e)}}function d(e){return function(t){o[e]=t}}function v(e){if(u.hasOwnProperty(e)){var t=u[e];delete u[e],f[e]=!0,i.apply(r,t)}if(!o.hasOwnProperty(e))throw new Error("No "+e);return o[e]}function m(e,t){var n,r,i=e.indexOf("!");return i!==-1?(n=c(e.slice(0,i),t),e=e.slice(i+1),r=v(n),r&&r.normalize?e=r.normalize(e,p(t)):e=c(e,t)):e=c(e,t),{f:n?n+"!"+e:e,n:e,p:r}}function g(e){return function(){return a&&a.config&&a.config[e]||{}}}var i,s,o={},u={},a={},f={},l=[].slice;i=function(e,t,n,i){var s,a,l,c,p,y=[],b;i=i||e;if(typeof n=="function"){t=!t.length&&n.length?["require","exports","module"]:t;for(p=0;p<t.length;p+=1){c=m(t[p],i),a=c.f;if(a==="require")y[p]=h(e);else if(a==="exports")y[p]=o[e]={},b=!0;else if(a==="module")s=y[p]={id:e,uri:"",exports:o[e],config:g(e)};else if(o.hasOwnProperty(a)||u.hasOwnProperty(a))y[p]=v(a);else if(c.p)c.p.load(c.n,h(i,!0),d(a),{}),y[p]=o[a];else if(!f[a])throw new Error(e+" missing "+a)}l=n.apply(o[e],y);if(e)if(s&&s.exports!==r&&s.exports!==o[e])o[e]=s.exports;else if(l!==r||!b)o[e]=l}else e&&(o[e]=n)},e=t=s=function(e,t,n,o,u){return typeof e=="string"?v(m(e,t).f):(e.splice||(a=e,t.splice?(e=t,t=n,n=null):e=r),t=t||function(){},typeof n=="function"&&(n=o,o=u),o?i(r,e,t,n):setTimeout(function(){i(r,e,t,n)},15),s)},s.config=function(e){return a=e,s},n=function(e,t,n){t.splice||(n=t,t=[]),u[e]=[e,t,n]},n.amd={jQuery:!0}})(),n("../node_modules/almond/almond",function(){}),function(e,t){function r(e){if(e&&e.__wrapped__)return e;if(!(this instanceof r))return new r(e);this.__wrapped__=e}function i(e,t,n){t||(t=0);var r=e.length,i=r-t>=(n||B),s=i?{}:e;if(i)for(var o=t-1;++o<r;)n=e[o]+"",(G.call(s,n)?s[n]:s[n]=[]).push(e[o]);return function(e){if(i){var n=e+"";return G.call(s,n)&&-1<E(s[n],e)}return-1<E(s,e,t)}}function s(e,n){var r=e.b,i=n.b,e=e.a,n=n.a;if(e!==n){if(e>n||e===t)return 1;if(e<n||n===t)return-1}return r<i?-1:1}function o(e,t,n){function r(){var u=arguments,a=s?this:t;return i||(e=t[o]),n.length&&(u=u.length?n.concat(et.call(u)):n),this instanceof r?(c.prototype=e.prototype,a=new c,(u=e.apply(a,u))&&Ht[typeof u]?u:a):e.apply(a,u)}var i=d(e),s=!n,o=e;return s&&(n=t),r}function u(e,n){return e?"function"!=typeof e?function(t){return t[e]}:n!==t?function(t,r,i){return e.call(n,t,r,i)}:e:k}function a(){for(var e,t,n,r=-1,i=arguments.length,o={e:"",p:"",c:{d:""},l:{d:""}};++r<i;)for(t in e=arguments[r],e)n=(n=e[t])==O?"":n,/d|h/.test(t)?("string"==typeof n&&(n={b:n,k:n}),o.c[t]=n.b||"",o.l[t]=n.k||""):o[t]=n;e=o.a,t=/^[^,]+/.exec(e)[0],n=o.i,r=o.r,o.f=t,o.g=Et,o.i=n==O?t:n,o.j=Mt,o.m=Tt,o.o=K,o.q=o.q!==M,o.r=r==O?_t:r,o.n==O&&(o.n=kt);if("d"!=t||!o.c.h)o.c=O;t="",o.r&&(t+=""),t+="var j,B,k="+o.f+",u",o.i&&(t+="="+o.i),t+=";"+o.p+";",o.c&&(t+="var l=k.length;j=-1;",o.l&&(t+="if(l===+l){"),o.n&&(t+="if(z.call(k)==x){k=k.split('')}"),t+=o.c.d+";while(++j<l){B=k[j];"+o.c.h+"}",o.l&&(t+="}"));if(o.l){o.c?t+="else {":o.m&&(t+="var l=k.length;j=-1;if(l&&P(k)){while(++j<l){B=k[j+=''];"+o.l.h+"}}else {"),o.g||(t+="var v=typeof k=='function'&&r.call(k,'prototype');");if(o.j&&o.q)t+="var o=-1,p=Z[typeof k]?m(k):[],l=p.length;"+o.l.d+";while(++o<l){j=p[o];",o.g||(t+="if(!(v&&j=='prototype')){"),t+="B=k[j];"+o.l.h+"",o.g||(t+="}");else{t+=o.l.d+";for(j in k){";if(!o.g||o.q)t+="if(",o.g||(t+="!(v&&j=='prototype')"),!o.g&&o.q&&(t+="&&"),o.q&&(t+="h.call(k,j)"),t+="){";t+="B=k[j];"+o.l.h+";";if(!o.g||o.q)t+="}"}t+="}";if(o.g){t+="var g=k.constructor;";for(n=0;7>n;n++)t+="j='"+o.o[n]+"';if(","constructor"==o.o[n]&&(t+="!(g&&g.prototype===k)&&"),t+="h.call(k,j)){B=k[j];"+o.l.h+"}"}if(o.c||o.m)t+="}"}return t+=o.e+";return u",Function("E,F,G,J,e,f,K,h,i,N,P,R,T,U,Y,Z,m,r,w,x,z,A","var H=function("+e+"){"+t+"};return H")(Dt,D,C,s,Q,u,en,G,k,E,p,$t,d,Jt,mt,Ht,ut,Z,et,yt,tt)}function f(e){return"\\"+Bt[e]}function l(e){return Qt[e]}function c(){}function h(e){return Gt[e]}function p(e){return tt.call(e)==ct}function d(e){return"function"==typeof e}function v(e){var t=M;if(!e||"object"!=typeof e||p(e))return t;var n=e.constructor;return(!Lt||"function"==typeof e.toString||"string"!=typeof (e+""))&&(!d(n)||n instanceof n)?xt?(en(e,function(e,n,r){return t=!G.call(r,n),M}),t===M):(en(e,function(e,n){t=n}),t===M||G.call(e,t)):t}function m(e,t,n,r,i){if(e==O)return e;n&&(t=M);if(n=Ht[typeof e]){var s=tt.call(e);if(!Pt[s]||Nt&&p(e))return e;var o=s==ht,n=o||(s==mt?Jt(e):n)}if(!n||!t)return n?o?et.call(e):Zt({},e):e;n=e.constructor;switch(s){case pt:return new n(e==A);case dt:return new n(+e);case vt:case yt:return new n(e);case gt:return n(e.source,z.exec(e))}r||(r=[]),i||(i=[]);for(s=r.length;s--;)if(r[s]==e)return i[s];var u=o?n(s=e.length):{};r.push(e),i.push(u);if(o)for(o=-1;++o<s;)u[o]=m(e[o],t,O,r,i);else tn(e,function(e,n){u[n]=m(e,t,O,r,i)});return u}function g(e,t,n,r){if(e==O||t==O)return e===t;if(e===t)return 0!==e||1/e==1/t;if(Ht[typeof e]||Ht[typeof t])e=e.__wrapped__||e,t=t.__wrapped__||t;var i=tt.call(e);if(i!=tt.call(t))return M;switch(i){case pt:case dt:return+e==+t;case vt:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case gt:case yt:return e==t+""}var s=Dt[i];if(Nt&&!s&&(s=p(e))&&!p(t)||!s&&(i!=mt||Lt&&("function"!=typeof e.toString&&"string"==typeof (e+"")||"function"!=typeof t.toString&&"string"==typeof (t+""))))return M;n||(n=[]),r||(r=[]);for(i=n.length;i--;)if(n[i]==e)return r[i]==t;var i=-1,o=A,u=0;n.push(e),r.push(t);if(s){u=e.length;if(o=u==t.length)for(;u--&&(o=g(e[u],t[u],n,r)););return o}s=e.constructor,o=t.constructor;if(s!=o&&(!d(s)||!(s instanceof s&&d(o)&&o instanceof o)))return M;for(var a in e)if(G.call(e,a)&&(u++,!G.call(t,a)||!g(e[a],t[a],n,r)))return M;for(a in t)if(G.call(t,a)&&!(u--))return M;if(Et)for(;7>++i;)if(a=K[i],G.call(e,a)&&(!G.call(t,a)||!g(e[a],t[a],n,r)))return M;return A}function y(e,t,n,r){var i=e,s=e.length,o=3>arguments.length;if(s!==+s)var u=sn(e),s=u.length;else kt&&tt.call(e)==yt&&(i=e.split(""));return mn(e,function(e,a,f){a=u?u[--s]:--s,n=o?(o=M,i[a]):t.call(r,n,i[a],a,f)}),n}function b(e,t,n){return t==O||n?e[0]:et.call(e,0,t)}function w(e,t){for(var n,r=-1,i=e.length,s=[];++r<i;)n=e[r],$t(n)?Y.apply(s,t?n:w(n)):s.push(n);return s}function E(e,t,n){var r=-1,i=e.length;if(n){if("number"!=typeof n)return r=T(e,t),e[r]===t?r:-1;r=(0>n?at(0,i+n):n)-1}for(;++r<i;)if(e[r]===t)return r;return-1}function S(e,t,n){for(var r=-Infinity,i=-1,s=e?e.length:0,o=r,t=u(t,n);++i<s;)n=t(e[i],i,e),n>r&&(r=n,o=e[i]);return o}function x(e,t,n){return et.call(e,t==O||n?1:t)}function T(e,t,n,r){for(var i=0,s=e.length,n=u(n,r),t=n(t);i<s;)r=i+s>>>1,n(e[r])<t?i=r+1:s=r;return i}function N(e,t,n,r){var i=-1,s=e.length,o=[],a=[];"function"==typeof t&&(r=n,n=t,t=M);for(n=u(n,r);++i<s;)if(r=n(e[i],i,e),t?!i||a[a.length-1]!==r:0>E(a,r))a.push(r),o.push(e[i]);return o}function C(e,t){return Ot||nt&&2<arguments.length?nt.call.apply(nt,arguments):o(e,t,et.call(arguments,2))}function k(e){return e}function L(e){mn(nn(e),function(t){var n=r[t]=e[t];r.prototype[t]=function(){var e=[this.__wrapped__];return arguments.length&&Y.apply(e,arguments),e=n.apply(r,e),this.__chain__&&(e=new r(e),e.__chain__=A),e}})}var A=!0,O=null,M=!1,_="object"==typeof exports&&exports&&("object"==typeof global&&global&&global==global.global&&(e=global),exports),D=Array.prototype,P=Object.prototype,H=0,B=30,j=e._,F=/[-?+=!~*%&^<>|{(\/]|\[\D|\b(?:delete|in|instanceof|new|typeof|void)\b/,I=/&(?:amp|lt|gt|quot|#x27);/g,q=/\b__p\+='';/g,R=/\b(__p\+=)''\+/g,U=/(__e\(.*?\)|\b__t\))\+'';/g,z=/\w*$/,W=/(?:__e|__t=)\(\s*(?![\d\s"']|this\.)/g,X=RegExp("^"+(P.valueOf+"").replace(/[.*+?^=!:${}()|[\]\/\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),V=/($^)/,$=/[&<>"']/g,J=/['\n\r\t\u2028\u2029\\]/g,K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Q=D.concat,G=P.hasOwnProperty,Y=D.push,Z=P.propertyIsEnumerable,et=D.slice,tt=P.toString,nt=X.test(nt=et.bind)&&nt,rt=Math.floor,it=X.test(it=Object.getPrototypeOf)&&it,st=X.test(st=Array.isArray)&&st,ot=e.isFinite,ut=X.test(ut=Object.keys)&&ut,at=Math.max,ft=Math.min,lt=Math.random,ct="[object Arguments]",ht="[object Array]",pt="[object Boolean]",dt="[object Date]",vt="[object Number]",mt="[object Object]",gt="[object RegExp]",yt="[object String]",bt=e.clearTimeout,wt=e.setTimeout,Et,St,xt,Tt=A;(function(){function e(){this.x=1}var t={0:1,length:1},n=[];e.prototype={valueOf:1,y:1};for(var r in new e)n.push(r);for(r in arguments)Tt=!r;Et=4>(n+"").length,xt="x"!=n[0],St=(n.splice.call(t,0,1),t[0])})(1);var Nt=!p(arguments),Ct="x"!=et.call("x")[0],kt="xx"!="x"[0]+Object("x")[0];try{var Lt=("[object Object]",tt.call(e.document||0)==mt)}catch(At){}var Ot=nt&&/\n|Opera/.test(nt+tt.call(e.opera)),Mt=ut&&/^.+$|true/.test(ut+!!e.attachEvent),_t=!Ot,Dt={};Dt[pt]=Dt[dt]=Dt["[object Function]"]=Dt[vt]=Dt[mt]=Dt[gt]=M,Dt[ct]=Dt[ht]=Dt[yt]=A;var Pt={};Pt[ct]=Pt["[object Function]"]=M,Pt[ht]=Pt[pt]=Pt[dt]=Pt[vt]=Pt[mt]=Pt[gt]=Pt[yt]=A;var Ht={"boolean":M,"function":A,object:A,number:M,string:M,"undefined":M,unknown:A},Bt={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};r.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,variable:""};var jt={a:"d,c,y",i:"d",p:"c=f(c,y)",h:"if(c(B,j,d)===false)return u"},Ft={i:"{}",p:"c=f(c,y)",h:"var q=c(B,j,d);(h.call(u,q)?u[q]++:u[q]=1)"},It={i:"true",h:"if(!c(B,j,d))return!u"},qt={q:M,r:M,a:"n",i:"n",p:"for(var a=1,b=arguments.length;a<b;a++){if(k=arguments[a]){",h:"u[j]=B",e:"}}"},Rt={i:"[]",h:"c(B,j,d)&&u.push(B)"},Ut={p:"c=f(c,y)"},zt={h:{k:jt.h}},Wt={i:"",d:{b:"u=Array(l)",k:"u="+(Mt?"Array(l)":"[]")},h:{b:"u[j]=c(B,j,d)",k:"u"+(Mt?"[o]=":".push")+"(c(B,j,d))"}},Xt={q:M,a:"n,c,y",i:"{}",p:"var S=typeof c=='function';if(S)c=f(c,y);else var t=e.apply(F,arguments)",h:"if(S?!c(B,j,n):N(t,j)<0)u[j]=B"},Vt=a({a:"n",i:"{}",h:"u[B]=j"});Nt&&(p=function(e){return!!e&&!!G.call(e,"callee")});var $t=st||function(e){return tt.call(e)==ht};d(/x/)&&(d=function(e){return"[object Function]"==tt.call(e)});var Jt=it?function(e){if(!e||"object"!=typeof e)return M;var t=e.valueOf,n="function"==typeof t&&(n=it(t))&&it(n);return n?e==n||it(e)==n&&!p(e):v(e)}:v,Kt=a({a:"n",i:"[]",p:"if(!(n&&Z[typeof n]))throw TypeError()",h:"u.push(j)"}),Qt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Gt=Vt(Qt),Yt=a(qt,{h:"if(u[j]==null)"+qt.h}),Zt=a(qt),en=a(jt,Ut,zt,{q:M}),tn=a(jt,Ut,zt),nn=a({q:M,a:"n",i:"[]",h:"if(T(B))u.push(j)",e:"u.sort()"}),rn=a({a:"B",i:"true",p:"if(!B)return u;var I=z.call(B),l=B.length;if(E[I]"+(Nt?"||P(B)":"")+"||(I==Y&&l===+l&&T(B.splice)))return!l",h:{k:"return false"}}),sn=ut?function(e){return"function"==typeof e&&Z.call(e,"prototype")?Kt(e):ut(e)}:Kt,on=a(qt,{a:"n,ee,O",p:"var Q,D=arguments,a=0;if(O==J){var b=2,ff=D[3],gg=D[4]}else var b=D.length,ff=[],gg=[];while(++a<b){if(k=D[a]){",h:"if((ee=B)&&((Q=R(ee))||U(ee))){var L=false,hh=ff.length;while(hh--)if(L=ff[hh]==ee)break;if(L){u[j]=gg[hh]}else {ff.push(ee);gg.push(B=(B=u[j])&&Q?(R(B)?B:[]):(U(B)?B:{}));u[j]=H(B,ee,J,ff,gg)}}else if(ee!=null)u[j]=ee"}),un=a(Xt),an=a({a:"n",i:"[]",h:"u"+(Mt?"[o]=":".push")+"([j,B])"}),fn=a(Xt,{p:"if(typeof c!='function'){var q,t=e.apply(F,arguments),l=t.length;for(j=1;j<l;j++){q=t[j];if(q in n)u[q]=n[q]}}else {c=f(c,y)",h:"if(c(B,j,n))u[j]=B",e:"}"}),ln=a({a:"n",i:"[]",h:"u.push(B)"}),cn=a({a:"d,ii",i:"false",n:M,d:{b:"if(z.call(d)==x)return d.indexOf(ii)>-1"},h:"if(B===ii)return true"}),hn=a(jt,Ft),pn=a(jt,It),dn=a(jt,Rt),vn=a(jt,Ut,{i:"",h:"if(c(B,j,d))return B"}),mn=a(jt,Ut),gn=a(jt,Ft,{h:"var q=c(B,j,d);(h.call(u,q)?u[q]:u[q]=[]).push(B)"}),yn=a(Wt,{a:"d,V",p:"var D=w.call(arguments,2),S=typeof V=='function'",h:{b:"u[j]=(S?V:B[V]).apply(B,D)",k:"u"+(Mt?"[o]=":".push")+"((S?V:B[V]).apply(B,D))"}}),bn=a(jt,Wt),wn=a(Wt,{a:"d,cc",h:{b:"u[j]=B[cc]",k:"u"+(Mt?"[o]=":".push")+"(B[cc])"}}),En=a({a:"d,c,C,y",i:"C",p:"var W=arguments.length<3;c=f(c,y)",d:{b:"if(W)u=k[++j]"},h:{b:"u=c(u,B,j,d)",k:"u=W?(W=false,B):c(u,B,j,d)"}}),Sn=a(jt,Rt,{h:"!"+Rt.h}),xn=a(jt,It,{i:"false",h:It.h.replace("!","")}),Tn=a(jt,Ft,Wt,{h:{b:"u[j]={a:c(B,j,d),b:j,c:B}",k:"u"+(Mt?"[o]=":".push")+"({a:c(B,j,d),b:j,c:B})"},e:"u.sort(J);l=u.length;while(l--)u[l]=u[l].c"}),Nn=a(Rt,{a:"d,bb",p:"var t=[];K(bb,function(B,q){t.push(q)});var dd=t.length",h:"for(var q,aa=true,s=0;s<dd;s++){q=t[s];if(!(aa=B[q]===bb[q]))break}aa&&u.push(B)"}),Cn=a({q:M,r:M,a:"n",p:"var M=arguments,l=M.length;if(l>1){for(var j=1;j<l;j++)u[M[j]]=G(u[M[j]],u);return u}",h:"if(T(u[j]))u[j]=G(u[j],u)"});r.VERSION="0.8.0",r.after=function(e,t){return 1>e?t():function(){if(1>--e)return t.apply(this,arguments)}},r.bind=C,r.bindAll=Cn,r.chain=function(e){return e=new r(e),e.__chain__=A,e},r.clone=m,r.compact=function(e){for(var t=-1,n=e.length,r=[];++t<n;)e[t]&&r.push(e[t]);return r},r.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}},r.contains=cn,r.countBy=hn,r.debounce=function(e,t,n){function r(){u=O,n||(s=e.apply(o,i))}var i,s,o,u;return function(){var a=n&&!u;return i=arguments,o=this,bt(u),u=wt(r,t),a&&(s=e.apply(o,i)),s}},r.defaults=Yt,r.defer=function(e){var n=et.call(arguments,1);return wt(function(){return e.apply(t,n)},1)},r.delay=function(e,n){var r=et.call(arguments,2);return wt(function(){return e.apply(t,r)},n)},r.difference=function(e){for(var t=-1,n=e.length,r=Q.apply(D,arguments),r=i(r,n),s=[];++t<n;)r(e[t])||s.push(e[t]);return s},r.escape=function(e){return e==O?"":(e+"").replace($,l)},r.every=pn,r.extend=Zt,r.filter=dn,r.find=vn,r.first=b,r.flatten=w,r.forEach=mn,r.forIn=en,r.forOwn=tn,r.functions=nn,r.groupBy=gn,r.has=function(e,t){return G.call(e,t)},r.identity=k,r.indexOf=E,r.initial=function(e,t,n){return et.call(e,0,-(t==O||n?1:t))},r.intersection=function(e){var t,n=arguments.length,r=[],s=-1,o=e.length,u=[];e:for(;++s<o;)if(t=e[s],0>E(u,t)){for(var a=1;a<n;a++)if(!(r[a]||(r[a]=i(arguments[a])))(t))continue e;u.push(t)}return u},r.invert=Vt,r.invoke=yn,r.isArguments=p,r.isArray=$t,r.isBoolean=function(e){return e===A||e===M||tt.call(e)==pt},r.isDate=function(e){return tt.call(e)==dt},r.isElement=function(e){return e?1===e.nodeType:M},r.isEmpty=rn,r.isEqual=g,r.isFinite=function(e){return ot(e)&&tt.call(e)==vt},r.isFunction=d,r.isNaN=function(e){return tt.call(e)==vt&&e!=+e},r.isNull=function(e){return e===O},r.isNumber=function(e){return tt.call(e)==vt},r.isObject=function(e){return e?Ht[typeof e]:M},r.isPlainObject=Jt,r.isRegExp=function(e){return tt.call(e)==gt},r.isString=function(e){return tt.call(e)==yt},r.isUndefined=function(e){return e===t},r.keys=sn,r.last=function(e,t,n){var r=e.length;return t==O||n?e[r-1]:et.call(e,-t||r)},r.lastIndexOf=function(e,t,n){var r=e.length;for(n&&"number"==typeof n&&(r=(0>n?at(0,r+n):ft(n,r-1))+1);r--;)if(e[r]===t)return r;return-1},r.lateBind=function(e,t){return o(t,e,et.call(arguments,2))},r.map=bn,r.max=S,r.memoize=function(e,t){var n={};return function(){var r=t?t.apply(this,arguments):arguments[0];return G.call(n,r)?n[r]:n[r]=e.apply(this,arguments)}},r.merge=on,r.min=function(e,t,n){for(var r=Infinity,i=-1,s=e?e.length:0,o=r,t=u(t,n);++i<s;)n=t(e[i],i,e),n<r&&(r=n,o=e[i]);return o},r.mixin=L,r.noConflict=function(){return e._=j,this},r.object=function(e,t){for(var n=-1,r=e.length,i={};++n<r;)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},r.omit=un,r.once=function(e){var t,n=M;return function(){return n?t:(n=A,t=e.apply(this,arguments),e=O,t)}},r.pairs=an,r.partial=function(e){return o(e,et.call(arguments,1))},r.pick=fn,r.pluck=wn,r.random=function(e,t){return e==O&&t==O&&(t=1),e=+e||0,t==O&&(t=e,e=0),e+rt(lt()*((+t||0)-e+1))},r.range=function(e,t,n){e=+e||0,n=+n||1,t==O&&(t=e,e=0);for(var r=-1,t=at(0,Math.ceil((t-e)/n)),i=Array(t);++r<t;)i[r]=e,e+=n;return i},r.reduce=En,r.reduceRight=y,r.reject=Sn,r.rest=x,r.result=function(e,t){var n=e?e[t]:O;return d(n)?e[t]():n},r.shuffle=function(e){for(var t,n=-1,r=e.length,i=Array(r);++n<r;)t=rt(lt()*(n+1)),i[n]=i[t],i[t]=e[n];return i},r.size=function(e){var t=e?e.length:0;return t===+t?t:sn(e).length},r.some=xn,r.sortBy=Tn,r.sortedIndex=T,r.tap=function(e,t){return t(e),e},r.template=function(e,t,n){n||(n={});var i,s,o=0,u=r.templateSettings,a="__p += '",l=n.variable||u.variable,c=l;e.replace(RegExp((n.escape||u.escape||V).source+"|"+(n.interpolate||u.interpolate||V).source+"|"+(n.evaluate||u.evaluate||V).source+"|$","g"),function(t,n,r,s,u){a+=e.slice(o,u).replace(J,f),a+=n?"'+__e("+n+")+'":s?"';"+s+";__p+='":r?"'+((__t=("+r+"))==null?'':__t)+'":"",i||(i=s||F.test(n||r)),o=u+t.length}),a+="';",c||(l="obj",i?a="with("+l+"){"+a+"}":(n=RegExp("(\\(\\s*)"+l+"\\."+l+"\\b","g"),a=a.replace(W,"$&"+l+".").replace(n,"$1__d"))),a=(i?a.replace(q,""):a).replace(R,"$1").replace(U,"$1;"),a="function("+l+"){"+(c?"":l+"||("+l+"={});")+"var __t,__p='',__e=_.escape"+(i?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":(c?"":",__d="+l+"."+l+"||"+l)+";")+a+"return __p}";try{s=Function("_","return "+a)(r)}catch(h){throw h.source=a,h}return t?s(t):(s.source=a,s)},r.throttle=function(e,t){function n(){u=new Date,o=O,i=e.apply(s,r)}var r,i,s,o,u=0;return function(){var a=new Date,f=t-(a-u);return r=arguments,s=this,0>=f?(u=a,i=e.apply(s,r)):o||(o=wt(n,f)),i}},r.times=function(e,t,n){for(var e=+e||0,r=-1,i=Array(e);++r<e;)i[r]=t.call(n,r);return i},r.toArray=function(e){var t=e?e.length:0;return t===+t?(Ct?tt.call(e)==yt:"string"==typeof e)?e.split(""):et.call(e):ln(e)},r.unescape=function(e){return e==O?"":(e+"").replace(I,h)},r.union=function(){for(var e=-1,t=Q.apply(D,arguments),n=t.length,r=[];++e<n;)0>E(r,t[e])&&r.push(t[e]);return r},r.uniq=N,r.uniqueId=function(e){var t=H++;return e?e+t:t},r.values=ln,r.where=Nn,r.without=function(e){for(var t=-1,n=e.length,r=i(arguments,1,20),s=[];++t<n;)r(e[t])||s.push(e[t]);return s},r.wrap=function(e,t){return function(){var n=[e];return arguments.length&&Y.apply(n,arguments),t.apply(this,n)}},r.zip=function(e){for(var t=-1,n=S(wn(arguments,"length")),r=Array(n);++t<n;)r[t]=wn(arguments,t);return r},r.all=pn,r.any=xn,r.collect=bn,r.detect=vn,r.drop=x,r.each=mn,r.foldl=En,r.foldr=y,r.head=b,r.include=cn,r.inject=En,r.methods=nn,r.select=dn,r.tail=x,r.take=b,r.unique=N,L(r),r.prototype.chain=function(){return this.__chain__=A,this},r.prototype.value=function(){return this.__wrapped__},mn("pop push reverse shift sort splice unshift".split(" "),function(e){var t=D[e];r.prototype[e]=function(){var e=this.__wrapped__;return t.apply(e,arguments),St&&e.length===0&&delete e[0],this.__chain__&&(e=new r(e),e.__chain__=A),e}}),mn(["concat","join","slice"],function(e){var t=D[e];r.prototype[e]=function(){var e=t.apply(this.__wrapped__,arguments);return this.__chain__&&(e=new r(e),e.__chain__=A),e}}),typeof n=="function"&&typeof n.amd=="object"&&n.amd?(e._=r,n("lodash",[],function(){return r})):_?"object"==typeof module&&module&&module.exports==_?(module.exports=r)._=r:_._=r:e._=r}(this),n("scales",["lodash"],function(e){function r(t,n){return e.chain(t).pluck("data").flatten().pluck(n).uniq().filter(function(e){return e!==undefined&&e!==null}).value().sort(d3.ascending)}function i(e,t){var n=e[0],r=e[1],i,s;return n===r&&(s=Math.max(Math.round(n/10),4),n-=s,r+=s),i=r-n,n=n?n-i/10:n,n=e[0]>0?Math.max(n,0):n,r=r?r+i/10:r,r=e[1]<0?Math.min(r,0):r,[n,r]}function s(e,t,i,s){s=s||n;var o=r(e,t);return d3.scale.ordinal().domain(o).rangeRoundBands(i,s)}function o(e,t,n){return n==="y"&&(e=i(e,n)),d3.scale.linear().domain(e).nice().rangeRound(t)}function u(e,t,n){return n==="y"&&(e=i(e,n)),d3.scale.pow().exponent(.65).domain(e).nice().rangeRound(t)}function a(t,n){return d3.time.scale().domain(e.map(t,function(e){return new Date(e)})).range(n)}function f(t,n){var r=e.chain(t).pluck("data").flatten().value();return{x:d3.extent(r,function(e){return e.x}),y:d3.extent(r,function(e){return e.y})}}function l(t,n,r,i){var l=f(n),c={},h=t._options,p=[h.axisPaddingLeft,t._width],d=[t._height,h.axisPaddingTop],v,m;return e.each([r,i],function(e,t){var r=t===0?"x":"y",i=t===0?p:d;switch(e){case"ordinal":c[r]=s(n,r,i);break;case"linear":c[r]=o(l[r],i,r);break;case"exponential":c[r]=u(l[r],i,r);break;case"time":c[r]=a(l[r],i)}}),c}var t=this,n=.25;return{ordinal:s,linear:o,exponential:u,time:a,xy:l}}),n("visutils",["lodash"],function(e){function t(t){return e.chain(e.range(t,10)).reverse().map(function(e){return'g[data-index="'+e+'"]'}).value().join(", ")}function n(e,t){var n=e.getAttribute("class");return(n!==null?n.replace(/color\d+/g,""):"")+" color"+t}return{getInsertionPoint:t,colorClass:n}}),n("vis/bar",["visutils","scales"],function(e,t){function s(e,t,n,r){e.xScale2=d3.scale.ordinal().domain(d3.range(0,n.length)).rangeRoundBands([0,e.xScale.rangeBand()],.08)}function o(t,s,o,u,a){var f,l,c=t.yZero;f=t._g.selectAll(r+o).data(u,function(e){return e.className}),f.enter().insert("g",i).attr("data-index",n).style("opacity",0).attr("class",function(t,n){var r=_.uniq((o+t.className).split(".")).join(" ");return r+" bar "+e.colorClass(this,n)}).attr("transform",function(e,n){return"translate("+t.xScale2(n)+",0)"}),l=f.selectAll("rect").data(function(e){return e.data},function(e){return e.x}),l.enter().append("rect").attr("width",0).attr("rx",3).attr("ry",3).attr("x",function(e){return t.xScale(e.x)+t.xScale2.rangeBand()/2}).attr("height",function(e){return Math.abs(c-t.yScale(e.y))}).attr("y",function(e){return e.y<0?c:t.yScale(e.y)}).on("mouseover",a.mouseover).on("mouseout",a.mouseout).on("click",a.click),s.barGroups=f,s.bars=l}function u(t,n,r){var i=t.yZero;n.barGroups.attr("class",function(t,n){return e.colorClass(this,n)}).transition().duration(r).style("opacity",1).attr("transform",function(e,n){return"translate("+t.xScale2(n)+",0)"}),n.bars.transition().duration(r).attr("width",t.xScale2.rangeBand()).attr("x",function(e){return t.xScale(e.x)}).attr("height",function(e){return Math.abs(i-t.yScale(e.y))}).attr("y",function(e){return e.y<0?i:t.yScale(e.y)})}function a(e,t,n){t.bars.exit().transition().duration(n).attr("width",0).remove(),t.barGroups.exit().transition().duration(n).style("opacity",0).remove()}function f(e,t,n){var r=e.xScale2?e.xScale2.rangeBand()/2:0;delete e.xScale2,t.bars.transition().duration(n).attr("width",0).attr("x",function(t){return e.xScale(t.x)+r})}var n=2,r="g.bar",i=e.getInsertionPoint(n);return{postUpdateScale:s,enter:o,update:u,exit:a,destroy:f}}),n("vis/line",["visutils"],function(e){function i(i,s,o,u,a){function g(e){return[e.data]}var f=i._options.interpolation,l=function(e,t){return!i.xScale2&&!i.xScale.rangeBand?i.xScale(new Date(e.x)):i.xScale(e.x)+i.xScale.rangeBand()/2},c=function(e){return i.yScale(e.y)},h=d3.svg.line().x(l).interpolate(f),p=d3.svg.area().x(l).y1(i.yZero).interpolate(f),d,v,m;d=i._g.selectAll(n+o).data(u,function(e){return e.className}),d.enter().insert("g",r).attr("data-index",t).attr("class",function(t,n){var r=_.uniq((o+t.className).split(".")).join(" ");return r+" line "+e.colorClass(this,n)}),v=d.selectAll("path.fill").data(g),v.enter().append("path").attr("class","fill").style("opacity",0).attr("d",p.y0(c)),m=d.selectAll("path.line").data(g),m.enter().append("path").attr("class","line").style("opacity",0).attr("d",h.y(c)),s.lineContainers=d,s.lineFills=v,s.linePaths=m,s.lineX=l,s.lineY=c,s.lineA=p,s.line=h}function s(t,n,r){n.lineContainers.attr("class",function(t,n){return e.colorClass(this,n)}),n.lineFills.transition().duration(r).style("opacity",1).attr("d",n.lineA.y0(n.lineY)),n.linePaths.transition().duration(r).style("opacity",1).attr("d",n.line.y(n.lineY))}function o(e,t){t.linePaths.exit().style("opacity",0).remove(),t.lineFills.exit().style("opacity",0).remove(),t.lineContainers.exit().remove()}function u(e,t,n){t.linePaths.transition().duration(n).style("opacity",0),t.lineFills.transition().duration(n).style("opacity",0)}var t=3,n="g.line",r=e.getInsertionPoint(t);return{enter:i,update:s,exit:o,destroy:u}}),n("vis/line-dotted",["lodash","vis/line"],function(e,t){function n(e,n,r,i,s){var o;t.enter(e,n,r,i,s),o=n.lineContainers.selectAll("circle").data(function(e){return e.data},function(e){return e.x}),o.enter().append("circle").style("opacity",0).attr("cx",n.lineX).attr("cy",n.lineY).attr("r",5).on("mouseover",s.mouseover).on("mouseout",s.mouseout).on("click",s.click),n.lineCircles=o}function r(n,r,i){t.update.apply(null,e.toArray(arguments)),r.lineCircles.transition().duration(i).style("opacity",1).attr("cx",r.lineX).attr("cy",r.lineY)}function i(n,r){r.lineCircles.exit().remove(),t.exit.apply(null,e.toArray(arguments))}function s(n,r,i){t.destroy.apply(null,e.toArray(arguments));if(!r.lineCircles)return;r.lineCircles.transition().duration(i).style("opacity",0)}return{enter:n,update:r,exit:i,destroy:s}}),n("vis/cumulative",["lodash","scales","vis/line-dotted"],function(e,t,n){function r(e,t,r,i,s){n.enter(e,t,r,i,s)}function i(t){function n(e,t){return e+t.y}var r=e.map(t,function(t){var r=t.data.length,i=e.clone(t.data);t=e.clone(t);while(r)r-=1,i[r]=e.clone(t.data[r]),i[r].y0=t.data[r].y,i[r].y=e.reduce(e.first(t.data,r),n,t.data[r].y);return e.extend(t,{data:i})});return r}function s(e){if(!e.hasOwnProperty("cumulativeOMainData"))return;e._mainData=e.cumulativeOMainData,delete e.cumulativeOMainData,e._compData=e.cumulativeOCompData,delete e.cumulativeOCompData}function o(e,t){s(e),e.cumulativeOMainData=e._mainData,e._mainData=i(e._mainData),e.cumulativeOCompData=e._compData,e._compData=i(e._compData)}function u(t,r,i){s(t),n.destroy.apply(null,e.toArray(arguments))}return{preUpdateScale:o,enter:r,update:n.update,exit:n.exit,destroy:u}}),n("chart",["lodash","scales","vis/bar","vis/line","vis/line-dotted","vis/cumulative"],function(e,t,n,r,i,s){function f(){var e=document;return!!e.createElementNS&&!!e.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect}function l(t,n,r,i){var s=this,o;s._options=i=e.defaults(i||{},a);if(f()===!1)return i.unsupported(r);s._selector=r,s._container=d3.select(r),s._drawSvg(),n=e.clone(n),t&&!n.type&&(n.type=t),s.setData(n),d3.select(window).on("resize",function(){o&&clearTimeout(o),o=setTimeout(function(){o=null,s._resize()},500)})}var o={bar:n,line:r,"line-dotted":i,cumulative:s},u=[[]],a={mouseover:function(e,t){},mouseout:function(e,t){},click:function(e,t){},axisPaddingTop:0,axisPaddingRight:0,axisPaddingBottom:5,axisPaddingLeft:20,paddingTop:0,paddingRight:0,paddingBottom:20,paddingLeft:60,tickHintX:10,tickFormatX:function(e){return e},tickHintY:10,tickFormatY:function(e){return e},dataFormatX:function(e){return e},dataFormatY:function(e){return e},unsupported:function(e){d3.select(e).text("SVG is not supported on your browser")},noDataMainOnly:!0,empty:function(e,t,n){},notempty:function(e,t){},timing:750,interpolation:"monotone"};return l.setVis=function(e,t){if(o.hasOwnProperty(e))throw'Cannot override vis type "'+e+'".';o[e]=t},l.getVis=function(t){if(!o.hasOwnProperty(t))throw'Vis type "'+t+'" does not exist.';return e.clone(o[t])},e.defaults(l.prototype,{setType:function(e,t){var n=this;if(n._type&&e===n._type)return;if(!o.hasOwnProperty(e))throw'Vis type "'+e+'" is not defined.';n._type&&n._destroy(n._vis,n._mainStorage),n._type=e,n._vis=o[e],t||n._draw()},setData:function(t){function s(t){var n=e.map(e.clone(t.data),function(t){var n=e.clone(t);return t.hasOwnProperty("x")&&(n.x=r.dataFormatX(t.x)),t.hasOwnProperty("y")&&(n.y=r.dataFormatY(t.y)),n}).sort(function(e,t){return!e.x&&!t.x?0:e.x<t.x?-1:1});return e.extend(e.clone(t),{data:n})}var n=this,r=n._options,i=e.clone(t);if(!t.hasOwnProperty("main"))throw'No "main" key found in given chart data.';switch(t.type){case"bar":t.xScale="ordinal";break;case undefined:t.type=n._type}n._vis&&n._destroy(n._vis,n._mainStorage),n.setType(t.type,!0),i.main=e.map(i.main,s),n._mainData=i.main,n._xScaleType=i.xScale,n._yScaleType=i.yScale,i.hasOwnProperty("comp")?(i.comp=e.map(i.comp,s),n._compData=i.comp):n._compData=[],n._draw()},setScale:function(e,t){var n=this;switch(e){case"x":n._xScaleType=t;break;case"y":n._yScaleType=t;break;default:throw'Cannot change scale of unknown axis "'+e+'".'}n._draw()},_drawSvg:function(){var e=this,t=e._container,n=e._options,r=parseInt(t.style("width").replace("px",""),10),i=parseInt(t.style("height").replace("px",""),10),s,o,a;s=t.selectAll("svg").data(u),s.enter().append("svg").attr("height",i).attr("width",r).attr("class","chart"),s.transition().attr("width",r).attr("height",i),o=s.selectAll("g").data(u),o.enter().append("g").attr("transform","translate("+n.paddingLeft+","+n.paddingTop+")"),a=o.selectAll("g.scale").data(u),a.enter().append("g").attr("class","scale"),e._svg=s,e._g=o,e._gScale=a,e._height=i-n.paddingTop-n.paddingBottom-n.axisPaddingTop-n.axisPaddingBottom,e._width=r-n.paddingLeft-n.paddingRight-n.axisPaddingLeft-n.axisPaddingRight},_resize:function(e){var t=this;t._drawSvg(),t._draw()},_drawAxes:function(){if(this._noData)return;var e=this,t=e._options,n=e._gScale.transition().duration(t.timing),r=t.tickHintX,i=t.tickHintY,s=e._height+t.axisPaddingTop+t.axisPaddingBottom,o=d3.svg.line().x(function(e){return e}),a,f,l,c,h,p,d;c=d3.svg.axis().scale(e.xScale).ticks(r).tickSize(-e._height).tickFormat(t.tickFormatX).orient("bottom"),l=e._gScale.selectAll("g.axisX").data(u),l.enter().append("g").attr("class","axis axisX").attr("transform","translate(0,"+s+")"),l.call(c),d=e._gScale.selectAll(".axisX g")[0],d.length>e._width/80&&(d.sort(function(e,t){var n=/translate\(([^,)]+)/;return e=e.getAttribute("transform").match(n),t=t.getAttribute("transform").match(n),parseFloat(e[1],10)-parseFloat(t[1],10)}),d3.selectAll(d).filter(function(e,t){return t%(Math.ceil(d.length/r)+1)}).remove()),p=d3.svg.axis().scale(e.yScale).ticks(i).tickSize(-e._width-t.axisPaddingRight-t.axisPaddingLeft).tickFormat(t.tickFormatY).orient("left"),h=e._gScale.selectAll("g.axisY").data(u),h.enter().append("g").attr("class","axis axisY").attr("transform","translate(0,0)"),n.selectAll("g.axisY").call(p),a=e._gScale.selectAll("g.axisZero").data([[]]),a.enter().append("g").attr("class","axisZero"),f=a.selectAll("line").data([[]]),f.enter().append("line").attr("x1",0).attr("x2",e._width+t.axisPaddingLeft+t.axisPaddingRight).attr("y1",e.yZero).attr("y2",e.yZero),f.transition().duration(t.timing).attr("y1",e.yZero).attr("y2",e.yZero)},_updateScale:function(){var n=this,r=function(){return e.union(n._mainData,n._compData)},i=r(),s=n._vis,o,u;delete n.xScale,delete n.yScale,delete n.yZero,s.hasOwnProperty("preUpdateScale")&&s.preUpdateScale(n,i,n._mainData,n._compData),i=r(),o=t.xy(n,i,n._xScaleType,n._yScaleType),n.xScale=o.x,n.yScale=o.y,u=n.yScale.domain()[0],n.yZero=u>0?n.yScale(u):n.yScale(0),s.hasOwnProperty("postUpdateScale")&&s.postUpdateScale(n,i,n._mainData,n._compData)},_enter:function(e,t,n,r){var i=this,s={click:i._options.click,mouseover:i._options.mouseover,mouseout:i._options.mouseout};i._checkVisMethod(e,"enter"),e.enter(i,t,r,n,s)},_update:function(e,t){var n=this;n._checkVisMethod(e,"update"),e.update(n,t,n._options.timing)},_exit:function(e,t){var n=this;n._checkVisMethod(e,"exit"),e.exit(n,t,n._options.timing)},_destroy:function(e,t){var n=this;n._checkVisMethod(e,"destroy");try{e.destroy(n,t,n._options.timing)}catch(r){}},_mainStorage:{},_compStorage:{},_draw:function(){var t=this,n=t._options,r,i;t._noData=e.flatten(e.pluck(t._mainData,"data")).length===0,n.noDataMainOnly||e.each(t._compData,function(n){var r=e.flatten(e.pluck(n,"data")).length===0;t._noData=t._noData&&r}),t._updateScale(),t._drawAxes(),t._enter(t._vis,t._mainStorage,t._mainData,".main"),t._exit(t._vis,t._mainStorage),t._update(t._vis,t._mainStorage),r=e.chain(t._compData).groupBy(function(e){return e.type}),i=r.keys(),e.each(t._compStorage,function(e,n){if(-1===i.indexOf(n).value()){var r=o[n];t._enter(r,e,[],".comp."+n.replace(/\W+/g,"")),t._exit(r,e)}}),r.each(function(e,n){var r=o[n],i;t._compStorage.hasOwnProperty(n)||(t._compStorage[n]={}),i=t._compStorage[n],t._enter(r,i,e,".comp."+n.replace(/\W+/g,"")),t._exit(r,i),t._update(r,i)}),t._noData?n.empty(t,t._selector,t._mainData):n.notempty(t,t._selector)},_checkVisMethod:function(e,t){var n=this;if(!e[t])throw'Required method "'+t+'" not found on vis type "'+n._type+'".'}}),l});if(typeof window.define=="function"&&typeof window.define.amd=="object"&&window.define.amd)return t("chart");window.xChart=t("chart")})()